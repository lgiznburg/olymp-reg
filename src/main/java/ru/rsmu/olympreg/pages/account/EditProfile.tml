<html t:type="layout" t:pageTitle="Олимпиада для школьников: личный кабинет"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter"
>
<body>

<t:competitorbreadcrumb currentPage="literal:profile"/>
<t:competitorinfo currentPage="literal:profile"/>

<div class="row"><div class="col-sm-10"><h3>Данные участника</h3></div></div>

<div class="row">
    <table class="table table-responsive">
        <tr>
            <td width="40%">Персональный номер</td>
            <td class=""><strong>${profile.caseNumber}</strong></td>
        </tr>

        <tr>
            <td>Фамилия</td>
            <td>${user.lastName}</td>
        </tr>

        <tr>
            <td>Имя</td>
            <td>${user.firstName}</td>
        </tr>

        <tr>
            <td>Отчество</td>
            <td>${user.middleName}</td>
        </tr>

        <tr>
            <td>Дата рождения</td>
            <td><t:output format="literal:dd MMMM yyyy" value="profile.birthDate"/></td>
        </tr>

        <tr>
            <td>Пол</td>
            <td>${profileSex}</td>
        </tr>

        <tr>
            <td>Контактный телефон</td>
            <td><t:if test="profile.phoneNumber">${profile.phoneNumber}</t:if></td>
        </tr>

        <tr>
            <td>Регион</td>
            <td>${profileRegionName}</td>
        </tr>

        <tr>
            <td>Название образовательного учереждения</td>
            <td>${profile.schoolNumber}</td>
        </tr>

        <tr>
            <td>Расположение образовательной организации</td>
            <td>${schoolLocationName}</td>
        </tr>

        <tr>
            <td>Класс</td>
            <td><t:if test="profile.classNumber">${profile.classNumber}</t:if></td>
        </tr>

    </table>
</div>
<div class="row"><div class="col-sm-10">
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Изменить
    </button>
</div></div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Изменение данных</h4>
            </div>
            <div class="modal-body">
                <t:form t:id="profileForm">
                    <table class="table table-responsive">
                        <tr>
                            <td><t:label for="userLastName">Фамилия</t:label></td>
                            <td>
                                <t:textfield t:id="userLastName" value="user.lastName" validate="required"/>
                            </td>
                        </tr>

                        <tr>
                            <td><t:label for="userFirstName">Имя</t:label></td>
                            <td>
                                <t:textfield t:id="userFirstName" value="user.firstName" validate="required"/>
                            </td>
                        </tr>

                        <tr>
                            <td><t:label for="userMiddleName">Отчество</t:label></td>
                            <td>
                                <t:textfield t:id="userMiddleName" value="user.middleName"/>
                            </td>
                        </tr>

                        <tr>
                            <td><t:label for="birthdate">Дата рождения</t:label></td>
                            <td>
                                <div style="width:50%;">
                                    <t:datefield t:id="birthdate" value="profile.birthDate" validate="required"/>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td><label>Пол</label></td>
                            <td>
                                <t:RadioGroup value="profile.sex" validate="required">
                                    <t:Radio t:id="radioH" value="literal:F" label="Женский" /> <t:label for="radioH"/><br/>
                                    <t:Radio t:id="radioM" value="literal:M" label="Мужской" /> <t:label for="radioM"/><br/>
                                </t:RadioGroup>
                            </td>
                        </tr>

                        <tr>
                            <td><t:label for="userPhoneNumber">Контактный телефон</t:label></td>
                            <td>
                                <t:textfield t:id="userPhoneNumber" value="profile.phoneNumber" t:mixins="MaskedInput" mask="+7(999)999-9999" placeholder="+7(___)___-____" validate="required"/>
                            </td>
                        </tr>

                        <tr>
                            <t:if test="registrationOpen">
                                <td><t:label for="userRegion">Регион</t:label></td>
                                <td>
                                    <t:select t:id="userRegion" value="profile.region" t:model="regionsModel"
                                              encoder="regionsEncoder" blankLabel="Выберите регион / субъект РФ" validate="required"/>
                                </td>
                                <p:else>
                                    <td>Регион</td>
                                    <td>${profileRegionName}</td>
                                </p:else>
                            </t:if>
                        </tr>

                        <tr>
                            <td><t:label for="userSchoolNumber">Название образовательного учереждения</t:label></td>
                            <td>
                                <t:textfield t:id="userSchoolNumber" value="profile.schoolNumber" validate="required"/>
                            </td>
                        </tr>

                        <tr>
                            <td><t:label for="userSchoolLocation">Расположение образовательной организации</t:label></td>
                            <td>
                                <t:select t:id="userSchoolLocation" value="profile.schoolLocation" blankLabel="Выберите место расположения школы" validate="required"/>
                            </td>
                        </tr>

                        <tr>
                            <t:if test="registrationOpen">
                                <td><t:label for="userClassNumb">Класс</t:label></td>
                                <td>
                                    <t:select t:id="userClassNumb" value="profile.classNumber" t:model="literal:9,10,11"
                                              blankLabel="Выберите номер класса" validate="required"/>
                                </td>
                                <p:else>
                                    <td>Класс</td>
                                    <td><t:if test="profile.classNumber">${profile.classNumber}</t:if></td>
                                </p:else>
                            </t:if>
                        </tr>
                    </table>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Отменить</button>
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                    </div>
                </t:form>
            </div>
        </div>
    </div>
</div>

</body>
</html>